기존에 만들던 구조가 너무 비효율적 + 복잡
새로운 버전을 만들거임
# 핵심 원칙

- **C++ 서브클래스 최소화**: 이동 계열이 완전히 다를 때만.
    
- **행동은 BT**, **메커닉은 컴포넌트**, **수치는 DataAsset**.
    
- **각 적은 BP 자식**으로 외형/애님/이펙트만 바꿉니다.
    

# C++ 최소 구조

- `AEnemyBase` (공통: HP, Perception, BT 훅, 공용 Blackboard 키)
    
- `AGroundEnemyBase : AEnemyBase`
    
- `AFlyingEnemyBase : AEnemyBase` ← **비행만 별도** (CharacterMovement=Flying 등)
    

## 공용 컴포넌트들

- `UShooterCombatComponent` : TryFire(쿨다운·트리거)
    
- `UProjectileWeaponComponent` : **Server_FireAt**(RPC) + Projectile 스폰/이펙트
    
- `UChargeComponent` : 돌진 준비/대시/후딜
    
- `UExplodeComponent` : 근접 시 자폭/광역
    
- `UStealthComponent` : 은신/노출 전환(머티리얼/Collision/Perception 토글)
    
- `UBuffAuraComponent` : 아군 버프(반경/대상 필터, 지속/간헐)
    
- `UMeleeComponent` : 근접 휘두르기(노티파이/히트박스)
    

## 데이터(에셋)

- `UEnemyConfig` : HP, MoveSpeed, 감지거리, 회피/스탠드오프 거리 등
    
- `UWeaponConfig` : 사거리, ROF, BurstCount, 탄속, 스프레드, 데미지
    
- 적 BP마다 `EnemyConfig + WeaponConfig`만 바꿔 끼우기
    

# BT 템플릿 (3개면 충분)

1. **Shooter_BT**
    
    - Service: Target 갱신(0.4s)
        
    - Sequence: MoveTo(Target) → Decorator: InRange → Task: Fire
        
    - 옵션: 스탠드오프(거리 유지), 시야/각도 Decorator
        
2. **Charger_BT**
    
    - Sequence: 접근 → Decorator: Charge가능 → Task: StartCharge → 후딜
        
    - **Exploder**는 InRange 시 `Explode`로 대체
        
3. **Support_BT**
    
    - EQS: 버프할 아군 찾기 → MoveTo → Task: ApplyBuff → 대기/재탐색
        

> 스나이퍼/머신건/연발/공중 슈터는 **Shooter_BT 그대로** + 무기 데이터만 변경.

# 적 타입별 구성표

- (1) **슈터형**: `Shooter_BT` + `UShooterCombatComponent` + `UProjectileWeaponComponent` (기본 무기 데이터)
    
- (2) **돌진형**: `Charger_BT` + `UChargeComponent` (+ `UMeleeComponent` 선택)
    
- (3) **슈터형+ (연발)**: `Shooter_BT` + 위와 동일, **WeaponConfig.BurstCount↑, Interval↓**
    
- (4) **탱커(머신건)**: `Shooter_BT` + 무기 데이터(짧은 ROF/장탄감) + `EnemyConfig`(HP/느림)
    
- (5) **은신형(근접)**: `Charger_BT` 또는 근접 BT + `UStealthComponent` (근접 시 노출)
    
- (6) **공중 슈터형**: **`AFlyingEnemyBase`** + `Shooter_BT` + 슈터 컴포넌트들
	     
- (7) **스나이퍼**: `Shooter_BT` + 무기 데이터(긴 사거리, 낮은 ROF, 높은 데미지) + 스탠드오프 Decorator
    
- (8) **돌격형+ (자폭)**: `Charger_BT` + `UExplodeComponent` (근접 시 폭발)
    
- (9) **서포터**: `Support_BT` + `UBuffAuraComponent` (EQS로 대상 선택)
    
- (10) **플레이어 위치 공격**: `Shooter_BT` 변형 또는 별도 Task: `StrikeAtLocation` (Blackboard Vector 사용)
    

# 서브클래스가 필요한 건?

- **공중 이동(6)**만 **`AFlyingEnemyBase`** 권장.  
    나머지는 **BP 자식 + 컴포넌트 조합 + 데이터**로 충분합니다.  
    슈터는 당연히 **별도 C++ 서브클래스 불필요**합니다.
    

# 적용 순서(짧고 안전)

1. `UProjectileWeaponComponent`(Server_FireAt) + `UShooterCombatComponent` 최소본 완료
    
2. `Shooter_BT` 하나로 (1)(3)(4)(7)(6) 커버 → 데이터로 분화
    
3. `Charger_BT`로 (2) → `Explode` 추가해 (8)
    
4. `UStealthComponent`로 (5), `UBuffAuraComponent`로 (9)
    
5. (10)은 `TargetLocation` 키 쓰는 전용 Task 하나 추가

FNP에서 플레이어 까지의 거리도 계산해서 BB에 키 할당해주기
이걸로 나중에 Decorator로 거리 별 로직 짜면 될듯